"use strict";!function(n){var s="";if(jscookie.get("cookiesid")&&jscookie.get("cookienum")){var o=jscookie.get("cookiesid").split(","),a=jscookie.get("cookienum").split(",");n.each(o,function(t,i){var c,e;c=o[t],e=a[t],n.ajax({url:"http://localhost/project_tianmao/php/alldata.php",dataType:"json",async:!1}).done(function(t){n.each(t,function(t,i){c==i.sid&&(s='\n\t\t\t\t\t\t\t<div class="list">\n\t\t\t\t\t\t\t\t<input class="check" type="checkbox"/>\n\t\t\t\t\t\t\t\t<div class ="list_img"><img src = "'+i.url+'" sid='+c+'></div>\n\t\t\t\t\t\t\t\t<p class ="list_title">'+i.title+'</p>\n\t\t\t\t\t\t\t\t<p class ="list_dianpu">'+i.dianpu+'</p>\n\t\t\t\t\t\t\t\t<p class ="list_price">￥'+i.price+'</p>\n\t\t\t\t\t\t\t\t<p class ="number"><span>'+e+'</span>件</p>\n\t\t\t\t\t\t\t\t<p class ="xiaoji"><span>'+i.price*e+'</span>元</p>\n\t\t\t\t\t\t\t\t<p class ="shanchu">删除</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t',n(".main").append(s),p())})})})}function p(){var c=0,e=0;n(".list").each(function(t,i){n(i).find(".check").prop("checked")&&(c+=parseInt(n(i).find(".number span").html()),e+=parseInt(n(i).find(".xiaoji span").html())),n(".sumnum").html(c),n(".sumprice").html(e)})}n(".quanxuan").on("change",function(){n(".list").find(".check").prop("checked",n(this).prop("checked")),n(".quanxuan").prop("checked",n(this).prop("checked")),p()}),n(".main").on("change",n(".check"),function(){n(".list").find(".check:checked").size()==n(".list").find(".check").size()?n(".quanxuan").prop("checked","checked"):n(".quanxuan").prop("checked",!1),p()});var i=[],l=[];n(".shanchu").on("click",function(){var c,t,e;window.confirm("确定要删除吗？")&&(n(this).parent(".list").remove(),console.log(n(this).parent(".list").find("img").attr("sid")),l=jscookie.get("cookiesid")&&jscookie.get("cookienum")?(i=jscookie.get("cookiesid").split(","),jscookie.get("cookienum").split(",")):(i=[],[]),c=n(this).parent(".list").find("img").attr("sid"),t=i,e=-1,n.each(t,function(t,i){c===i&&(e=t)}),t.splice(e,1),l.splice(e,1),jscookie.add("cookiesid",t,15),jscookie.add("cookienum",l,15),p())})}(jQuery);